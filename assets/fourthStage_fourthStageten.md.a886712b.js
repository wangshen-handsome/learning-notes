import{_ as s,c as n,o as a,V as l}from"./chunks/framework.9c1268ca.js";const p="/learning-notes/assets/image-20220619160911351.d7b0305c.png",u=JSON.parse('{"title":"四阶段 | 第十天","description":"","frontmatter":{"layout":"fourthStageten","title":"四阶段 | 第十天"},"headers":[],"relativePath":"fourthStage/fourthStageten.md","filePath":"fourthStage/fourthStageten.md"}'),o={name:"fourthStage/fourthStageten.md"},e=l(`<h2 id="小u商城后台管理项目" tabindex="-1">小U商城后台管理项目 <a class="header-anchor" href="#小u商城后台管理项目" aria-label="Permalink to &quot;小U商城后台管理项目&quot;">​</a></h2><h3 id="一、创建项目" tabindex="-1">一、创建项目 <a class="header-anchor" href="#一、创建项目" aria-label="Permalink to &quot;一、创建项目&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">vue create umall-admin</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">一定要选择 vuex、vue-router</span></span>
<span class="line"><span style="color:#A6ACCD;">如果你想用less，就加上css预处理器</span></span></code></pre></div><h3 id="二、根据下载相关依赖" tabindex="-1">二、根据下载相关依赖 <a class="header-anchor" href="#二、根据下载相关依赖" aria-label="Permalink to &quot;二、根据下载相关依赖&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">npm i element-ui@2.15.8 axios</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">+ element-ui@2.15.8</span></span>
<span class="line"><span style="color:#A6ACCD;">+ axios@0.27.2</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">element-ui这里要用2.15.8的版本，否则后面用时间时会报错</span></span></code></pre></div><h3 id="三、初始化清空并运行" tabindex="-1">三、初始化清空并运行 <a class="header-anchor" href="#三、初始化清空并运行" aria-label="Permalink to &quot;三、初始化清空并运行&quot;">​</a></h3><p>1、删除assets下面的图片，components下面的组件，views文件夹</p><p>2、重置App.vue</p><p>3、重置router-&gt;index.js</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">npm run serve</span></span></code></pre></div><h3 id="四、全局引入element-ui" tabindex="-1">四、全局引入element-ui <a class="header-anchor" href="#四、全局引入element-ui" aria-label="Permalink to &quot;四、全局引入element-ui&quot;">​</a></h3><p>在main.js下</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 全局引入elementUI</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> ElementUI </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">element-ui</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">element-ui/lib/theme-chalk/index.css</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">Vue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(ElementUI)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 引入清除全局样式</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./assets/css/base.css</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>创建清除样式 assets/css/base.css 并引入到main.js中</p><div class="language-css"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">margin</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#B2CCD6;">padding</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="五、全局封装接口模块" tabindex="-1">五、全局封装接口模块 <a class="header-anchor" href="#五、全局封装接口模块" aria-label="Permalink to &quot;五、全局封装接口模块&quot;">​</a></h3><p>创建：request-&gt;index.js</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 这个文件模块用于管理：拦截器、get和post方法二次封装</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> axios </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">axios</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 引入axios</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> qs </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">querystring</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 引入原生node的字符串查询方法</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> store </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../store</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 引入封装好的仓库文件</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> baseUrl </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/api</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 基础url地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 创建请求拦截器</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">req</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// if (req.url != &#39;/api/login&#39; || req.url != &#39;/api/register&#39;) {</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//   req.headers.authorization = store.getters.getUser.token;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// }</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 响应拦截</span></span>
<span class="line"><span style="color:#A6ACCD;">axios</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">interceptors</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// return res.data;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  二次封装get方法</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  url：指调取的接口地址</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  params：数据参数对象</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> get </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">url</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">params</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{})</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">axios</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">baseUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">params</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  二次封装post方法</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  url：指调取的接口地址</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  params：数据参数对象</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  isFile：是否有上传文件，默认不上传文件</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> post </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">url</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">params</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">isFile</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">isFile</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 有文件上传</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">FormData</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">attr</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">params</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">attr</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">params</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">attr</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 没有文件上传，则把数据拼成查询字符串</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">qs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">params</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">resolve</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">reject</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">axios</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">baseUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">err</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#82AAFF;">reject</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p>创建：request-&gt;api.js</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">get</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">post</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 这里是你所有的接口封装</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 接口就分两种情况，如果有参数，就传一个对象进来，如果没有参数，就不传参。不再区分get和post的传参不同</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 轮播图</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> getBanner </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/getbanner</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h3 id="六、根据产品需求创建一级路由以及重定向" tabindex="-1">六、根据产品需求创建一级路由以及重定向 <a class="header-anchor" href="#六、根据产品需求创建一级路由以及重定向" aria-label="Permalink to &quot;六、根据产品需求创建一级路由以及重定向&quot;">​</a></h3><p>一级路由定义在pages文件夹下。这里先定义<strong>登录</strong>一级路由模块并<strong>重定向</strong>（先开发登录），并设置好一级路由出口</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Vue </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> VueRouter </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue-router</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Vue</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">use</span><span style="color:#A6ACCD;">(VueRouter)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> routes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/login</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">component</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../pages/login.vue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">redirect</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/login</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> router </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">VueRouter</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  routes</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> router</span></span></code></pre></div><h3 id="七、搭建登录页静态骨架以及基本逻辑验证" tabindex="-1">七、搭建登录页静态骨架以及基本逻辑验证 <a class="header-anchor" href="#七、搭建登录页静态骨架以及基本逻辑验证" aria-label="Permalink to &quot;七、搭建登录页静态骨架以及基本逻辑验证&quot;">​</a></h3><p>创建：pages/login.vue</p><p>这里只先做登录格式验证，不请求数据，验证成功，跳到index页</p><p><img src="`+p+`" alt="image-20220619160911351"></p><p>表单里面的关键属性有：</p><ul><li>el-form上的<strong>model</strong>属性和el-input上的<strong>v-model</strong>属性用于数据</li><li>el-form上的<strong>rules</strong>和el-form-item上的<strong>prop</strong>属性用于较验规则</li><li>表单上的validate方法，进行全局验证（要在el-form上面加ref，方便找到它，好调用validate）</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">el-form 表单输入</span></span>
<span class="line"><span style="color:#A6ACCD;">	model	表单数据对象	object</span></span>
<span class="line"><span style="color:#A6ACCD;">	rules	表单验证规则	object，Form 组件提供了表单验证的功能，只需要通过 rules 属性传入约定的验证规则，并将 Form-Item 的 prop 属性设置为需校验的字段名即可</span></span>
<span class="line"><span style="color:#A6ACCD;">	validate，对整个表单进行校验的方法，参数为一个回调函数。该回调函数会在校验结束后被调用，并传入两个参数：是否校验成功和未通过校验的字段。若不传入回调函数，则会返回一个 promise</span></span></code></pre></div><h3 id="八、搭建index界面的基本骨架" tabindex="-1">八、搭建index界面的基本骨架 <a class="header-anchor" href="#八、搭建index界面的基本骨架" aria-label="Permalink to &quot;八、搭建index界面的基本骨架&quot;">​</a></h3><p>创建：pages/index.vue</p><p>使用 container 布局容器搭建基本布局</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">el-container</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;el-header class=&quot;my-header&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;h1&gt;小U商城后台管理系统&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/el-header&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;el-container&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-aside width=&quot;200px&quot;&gt;Aside&lt;/el-aside&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-main&gt;Main&lt;/el-main&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">el-container</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">/</span><span style="color:#F07178;">el-container</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>使用 NavMenu 导航菜单搭建左侧布局</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">el-menu</span></span>
<span class="line"><span style="color:#A6ACCD;">    default-active	当前激活菜单的 index	string</span></span>
<span class="line"><span style="color:#A6ACCD;">    background-color	菜单的背景色（仅支持 hex 格式）	string</span></span>
<span class="line"><span style="color:#A6ACCD;">    text-color	菜单的文字颜色（仅支持 hex 格式）	string</span></span>
<span class="line"><span style="color:#A6ACCD;">    active-text-color	当前激活菜单的文字颜色（仅支持 hex 格式）	string</span></span>
<span class="line"><span style="color:#A6ACCD;">    unique-opened	是否只保持一个子菜单的展开	boolean</span></span>
<span class="line"><span style="color:#A6ACCD;">    router	是否使用 vue-router 的模式，启用该模式会在激活导航时以 index 作为 path 进行路由跳转</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">一级</span></span>
<span class="line"><span style="color:#A6ACCD;">login.vue</span></span>
<span class="line"><span style="color:#A6ACCD;">index.vue</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">二级</span></span>
<span class="line"><span style="color:#A6ACCD;">0欢迎页-home.vue</span></span>
<span class="line"><span style="color:#A6ACCD;">1菜单管理-menu</span></span>
<span class="line"><span style="color:#A6ACCD;">2角色管理-role</span></span>
<span class="line"><span style="color:#A6ACCD;">3管理员管理-user</span></span>
<span class="line"><span style="color:#A6ACCD;">4商品分类-cate</span></span>
<span class="line"><span style="color:#A6ACCD;">5商品规格-specs</span></span>
<span class="line"><span style="color:#A6ACCD;">6商品管理-goods</span></span>
<span class="line"><span style="color:#A6ACCD;">7会员管理-member</span></span>
<span class="line"><span style="color:#A6ACCD;">8轮播图管理-banner</span></span>
<span class="line"><span style="color:#A6ACCD;">9秒杀活动-seck</span></span></code></pre></div><h3 id="九、实现点击左侧导航渲染右侧视图" tabindex="-1">九、实现点击左侧导航渲染右侧视图 <a class="header-anchor" href="#九、实现点击左侧导航渲染右侧视图" aria-label="Permalink to &quot;九、实现点击左侧导航渲染右侧视图&quot;">​</a></h3><p>创建</p><p>views/home.vue（欢迎页）</p><p>views/menu.vue（菜单管理）</p><p>views/role.vue（角色管理）</p><p>views/user.vue（管理员管理）</p><p>二级视图，并做好路由出口</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> routes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/login</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 登录页</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">component</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../pages/login</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 页面布局而已，一旦到这里就让它重定向到欢迎页</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">component</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../pages/index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">children</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/home</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 欢迎页</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">component</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../views/home</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/menu</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 菜单管理</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">component</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../views/menu</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">redirect</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/home</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">redirect</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>注意点：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">当页面刷新的时候，保持选中状态与当前path地址一致</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">如何做到？</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">default-active默认选中的项给一个变量，当刷新的时候，让这个变量指向当前地址</span></span>
<span class="line"><span style="color:#A6ACCD;">mounted() {</span></span>
<span class="line"><span style="color:#A6ACCD;">	// console.log(this.$route);</span></span>
<span class="line"><span style="color:#A6ACCD;">	this.defaultActive = this.$route.path;</span></span>
<span class="line"><span style="color:#A6ACCD;">},</span></span></code></pre></div><h3 id="十、拆分左侧导航菜单成为独立组件" tabindex="-1">十、拆分左侧导航菜单成为独立组件 <a class="header-anchor" href="#十、拆分左侧导航菜单成为独立组件" aria-label="Permalink to &quot;十、拆分左侧导航菜单成为独立组件&quot;">​</a></h3><p>创建components/vNav.vue，放左侧导航，然后再引入到index.vue中</p><h3 id="十一、实现菜单管理的基本静态布局-未拆分组件" tabindex="-1">十一、实现菜单管理的基本静态布局（未拆分组件） <a class="header-anchor" href="#十一、实现菜单管理的基本静态布局-未拆分组件" aria-label="Permalink to &quot;十一、实现菜单管理的基本静态布局（未拆分组件）&quot;">​</a></h3><p>面包屑</p><p>添加按钮</p><p>渲染列表</p><p>弹窗</p><p>其中面包屑和添加按钮放在menu主组件中，渲染列表放在list组件中，弹窗放在dialog中</p><h3 id="十二、实现菜单管理的拆分" tabindex="-1">十二、实现菜单管理的拆分 <a class="header-anchor" href="#十二、实现菜单管理的拆分" aria-label="Permalink to &quot;十二、实现菜单管理的拆分&quot;">​</a></h3><ul><li>menu.vue 主组件</li><li>list.vue 列表组件</li><li>dialog.vue 弹框组件</li></ul><h3 id="十三、实现弹框的静态视图" tabindex="-1">十三、实现弹框的静态视图 <a class="header-anchor" href="#十三、实现弹框的静态视图" aria-label="Permalink to &quot;十三、实现弹框的静态视图&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">el-dialog 弹窗相关属性</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">visible	是否显示 Dialog，支持 .sync 修饰符</span></span>
<span class="line"><span style="color:#A6ACCD;">title	Dialog 的标题，也可通过具名 slot （见下表）传入</span></span>
<span class="line"><span style="color:#A6ACCD;">show-close	是否显示关闭按钮（可以不展示关闭按钮）</span></span>
<span class="line"><span style="color:#A6ACCD;">before-close	关闭前的回调，会暂停 Dialog 的关闭（当点击关闭按钮时，调用cancel回调函数）</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">center	是否对头部和底部采用居中布局</span></span></code></pre></div><h3 id="十四、点击列表编辑渲染编辑弹框" tabindex="-1">十四、点击列表编辑渲染编辑弹框 <a class="header-anchor" href="#十四、点击列表编辑渲染编辑弹框" aria-label="Permalink to &quot;十四、点击列表编辑渲染编辑弹框&quot;">​</a></h3><p>点击添加和编缉按钮，实现不同的标题和按钮</p><p>渲染弹窗form表单</p><p>看接口，菜单添加 /api/menuadd 要求的数据</p><p>根据接口写数据</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 数据</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">menuInfo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">pid</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 上级分类编号  注意：顶级菜单-0  这里写成字符串，方便验证</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 菜单名称</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">icon</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 图标</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 类型 1目录2菜单</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">url</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 菜单地址</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">status</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 状态   1正常2禁用   number类型</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span></span></code></pre></div><p>注意：关闭弹窗时，input输入的内容和验证不会自动关闭，必须在取消的函数里面重置数据和重置表单验证</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 封装一个关闭弹窗事件</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">cancel</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">$emit</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cancel</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">menuInfo</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        pid</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 上级分类编号  注意：顶级菜单-0</span></span>
<span class="line"><span style="color:#F07178;">        title</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 菜单名称</span></span>
<span class="line"><span style="color:#F07178;">        icon</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 图标</span></span>
<span class="line"><span style="color:#F07178;">        type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 类型 1目录2菜单</span></span>
<span class="line"><span style="color:#F07178;">        url</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 菜单地址</span></span>
<span class="line"><span style="color:#F07178;">        status</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 状态   1正常2禁用   number类型</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">$refs</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">menu</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resetFields</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 重置表单验证</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span></code></pre></div><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">el-form</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">model</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">menuInfo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;el-form-item label=&quot;菜单名称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-input v-model=&quot;menuInfo.title&quot;&gt;&lt;/el-input&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/el-form-item&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;el-form-item label=&quot;上级菜单&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-select v-model=&quot;menuInfo.pid&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;el-option label=&quot;上级菜单&quot; :value=&quot;0&quot;&gt;&lt;/el-option&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;el-option</span></span>
<span class="line"><span style="color:#A6ACCD;">                v-for=&quot;item in options&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">                :key=&quot;item.value&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">                :label=&quot;item.label&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">                :value=&quot;item.value&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;/el-option&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/el-select&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/el-form-item&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;el-form-item label=&quot;菜单类型&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-radio v-model=&quot;menuInfo.type&quot; :label=&quot;1&quot;&gt;目录&lt;/el-radio&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-radio v-model=&quot;menuInfo.type&quot; :label=&quot;2&quot;&gt;菜单&lt;/el-radio&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/el-form-item&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;el-form-item label=&quot;菜单地址&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-input v-model=&quot;menuInfo.url&quot;&gt;&lt;/el-input&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/el-form-item&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;el-form-item label=&quot;菜单图标&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-input v-model=&quot;menuInfo.icon&quot;&gt;&lt;/el-input&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/el-form-item&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;el-form-item label=&quot;菜单状态&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;el-switch</span></span>
<span class="line"><span style="color:#A6ACCD;">            v-model=&quot;menuInfo.status&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">            active-color=&quot;#13ce66&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">            inactive-color=&quot;#ff4949&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">            :active-value=&quot;1&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">            :inactive-value=&quot;2&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/el-switch&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/el-form-item&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">el-form</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="十五、实现菜单列表动态渲染" tabindex="-1">十五、实现菜单列表动态渲染 <a class="header-anchor" href="#十五、实现菜单列表动态渲染" aria-label="Permalink to &quot;十五、实现菜单列表动态渲染&quot;">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">/api/menulist</span></span></code></pre></div><p>注意点：访问这个地址，需要暂时注销token</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">未实现登录功能，没有token</span></span>
<span class="line"><span style="color:#A6ACCD;">所以暂时注释掉后端服务app.js中的token验证</span></span>
<span class="line"><span style="color:#A6ACCD;">大概64行</span></span>
<span class="line"><span style="color:#A6ACCD;">// 如果想被登录拦截器拦截判断的, 接口放到下面(此拦截器以下所有的路由都需要验证本次请求是否携带token以及token有效期)</span></span>
<span class="line"><span style="color:#A6ACCD;">// app.use(async (req, res, next) =&gt; {</span></span>
<span class="line"><span style="color:#A6ACCD;">//     if (!req.headers.authorization) {</span></span>
<span class="line"><span style="color:#A6ACCD;">//         res.send(MError([&quot;请设置请求头,并携带验证字符串&quot;]));</span></span>
<span class="line"><span style="color:#A6ACCD;">//     } else {</span></span>
<span class="line"><span style="color:#A6ACCD;">//         if (!await checkToken(req)) { // 过期  </span></span>
<span class="line"><span style="color:#A6ACCD;">//             res.send(Guest([], &quot;登录已过期或访问权限受限&quot;));</span></span>
<span class="line"><span style="color:#A6ACCD;">//         } else {</span></span>
<span class="line"><span style="color:#A6ACCD;">//             next();</span></span>
<span class="line"><span style="color:#A6ACCD;">//         }</span></span>
<span class="line"><span style="color:#A6ACCD;">//     }</span></span>
<span class="line"><span style="color:#A6ACCD;">// });</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">一定要记得重启</span></span></code></pre></div><p>可以重新导入空表shop_api无数据.sql，免得原数据影响（可以先实现列表，后再导入空表）</p><h3 id="十六、把菜单列表接口封装到vuex中模块中" tabindex="-1">十六、把菜单列表接口封装到vuex中模块中 <a class="header-anchor" href="#十六、把菜单列表接口封装到vuex中模块中" aria-label="Permalink to &quot;十六、把菜单列表接口封装到vuex中模块中&quot;">​</a></h3><p>使用vuex的模块数据仓库，创建http请求模块，解决跨域等问题</p><h3 id="十七、实现菜单列表的渲染" tabindex="-1">十七、实现菜单列表的渲染 <a class="header-anchor" href="#十七、实现菜单列表的渲染" aria-label="Permalink to &quot;十七、实现菜单列表的渲染&quot;">​</a></h3><p>注意给el-table-column渲染数据。item.row为每一条的数据</p><p>注意写法格式</p><div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">el-table-column</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">label</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">状态</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;template v-slot=&quot;item&quot;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		&lt;div&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;el-button size=&quot;mini&quot; plain v-if=&quot;item.row.status == 1&quot;&gt;启用&lt;/el-button&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;el-button size=&quot;mini&quot; plain v-else&gt;禁用&lt;/el-button&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        &lt;/div&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;/template&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">el-table-column</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h3 id="十八、实现菜单的添加功能" tabindex="-1">十八、实现菜单的添加功能 <a class="header-anchor" href="#十八、实现菜单的添加功能" aria-label="Permalink to &quot;十八、实现菜单的添加功能&quot;">​</a></h3><h3 id="十九、实现菜单的删除功能" tabindex="-1">十九、实现菜单的删除功能 <a class="header-anchor" href="#十九、实现菜单的删除功能" aria-label="Permalink to &quot;十九、实现菜单的删除功能&quot;">​</a></h3><p>删除注意还要有展示树形结构</p><p>要求数据中有children，el-table表格中有row-key=&quot;id&quot;，它才能展示出树形结构</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">支持树类型的数据的显示。当 row 中包含 children 字段时，被视为树形数据。渲染树形数据时，必须要指定 row-key=&quot;id&quot;。</span></span>
<span class="line"><span style="color:#A6ACCD;">default-expand-all 展开所有的子项</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">&lt;el-table</span></span>
<span class="line"><span style="color:#A6ACCD;">    :data=&quot;get_menulist&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    border</span></span>
<span class="line"><span style="color:#A6ACCD;">    style=&quot;width: 100%&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    row-key=&quot;id&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    default-expand-all</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;</span></span></code></pre></div><h3 id="二十、实现菜单的数据回显以及编辑功能" tabindex="-1">二十、实现菜单的数据回显以及编辑功能 <a class="header-anchor" href="#二十、实现菜单的数据回显以及编辑功能" aria-label="Permalink to &quot;二十、实现菜单的数据回显以及编辑功能&quot;">​</a></h3><p>数据回显，关键是menu.vue调用dialog.vue，在dialog.vue中定义一个lookup函数，然后父级件通过refs找到它，并执行这个函数，并将ID传过去。</p>`,87),t=[e];function c(r,y,D,i,F,C){return a(),n("div",null,t)}const d=s(o,[["render",c]]);export{u as __pageData,d as default};
